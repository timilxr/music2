{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AYORINDE JOHN\\\\Desktop\\\\smarthub files\\\\smarthub\\\\react-apps\\\\music\\\\src\\\\components\\\\login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { getFromStorage, setInStorage } from '../utils/storage';\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      token: '',\n      signUpError: '',\n      signInError: '',\n      signInEmail: '',\n      signInPassword: '',\n      signUpFirstname: '',\n      signUpLastname: '',\n      signUpEmail: '',\n      signUpPassword: ''\n    };\n    this.onSignInChangeEmail = this.onSignInChangeEmail.bind(this);\n    this.onSignInChangePassword = this.onSignInChangePassword.bind(this);\n    this.onSignUpChangeEmail = this.onSignUpChangeEmail.bind(this);\n    this.onSignUpChangePassword = this.onSignUpChangePassword.bind(this);\n    this.onSignUpChangeFirstname = this.onSignUpChangeFirstname.bind(this);\n    this.onSignUpChangeLastname = this.onSignUpChangeLastname.bind(this);\n    this.onSignIn = this.onSignIn.bind(this);\n    this.onSignUp = this.onSignUp.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  componentDidMount() {\n    const obj = getFromStorage('the_main_app');\n\n    if (obj && obj.token) {\n      const {\n        token\n      } = obj;\n      console.log(token);\n      axios.get('http://localhost:5001/users/verify/' + token).then(res => {\n        console.log(res.data);\n\n        if (res.data.message === 'Verified') {\n          this.setState({\n            token: token,\n            isLoading: false\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          isLoading: false\n        });\n      });\n    } else {\n      this.setState({\n        isLoading: false\n      });\n    }\n  }\n\n  onSignInChangeEmail(e) {\n    this.setState({\n      signInEmail: e.target.value\n    });\n  }\n\n  onSignInChangePassword(e) {\n    this.setState({\n      signInPassword: e.target.value\n    });\n  }\n\n  onSignUpChangeFirstname(e) {\n    this.setState({\n      signUpFirstname: e.target.value\n    });\n  }\n\n  onSignUpChangeLastname(e) {\n    this.setState({\n      signUpLastname: e.target.value\n    });\n  }\n\n  onSignUpChangeEmail(e) {\n    this.setState({\n      signUpEmail: e.target.value\n    });\n  }\n\n  onSignUpChangePassword(e) {\n    this.setState({\n      signUpPassword: e.target.value\n    });\n  }\n\n  onSignIn() {\n    const {\n      signInEmail,\n      signInPassword\n    } = this.state;\n    axios.post('http://localhost:5001/users/signin', {\n      email: signInEmail,\n      password: signInPassword\n    }).then(res => {\n      console.log(res);\n      setInStorage('the_main_app', {\n        token: res.data.token\n      });\n      this.setState({\n        signInError: res.data.message,\n        isLoading: false,\n        signInPassword: '',\n        signInEmail: ''\n      });\n      this.componentDidMount();\n    }).catch(err => {\n      console.log(err);\n      this.setState({\n        signInError: err,\n        isLoading: false\n      });\n    });\n  }\n\n  logout() {\n    this.setState({\n      isLoading: true\n    });\n    const obj = getFromStorage('the_main_app');\n\n    if (obj && obj.token) {\n      const {\n        token\n      } = obj;\n      console.log(token);\n      axios.get('http://localhost:5001/users/logout/' + token).then(res => {\n        console.log(res.data);\n\n        if (res.data === 'session is deleted') {\n          this.setState({\n            token: '',\n            isLoading: false\n          });\n        }\n\n        this.setState({\n          isLoading: false\n        });\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          isLoading: false\n        });\n      });\n    } else {\n      this.setState({\n        isLoading: false\n      });\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n  }\n\n  onSignUp() {\n    const {\n      signUpFirstname,\n      signUpLastname,\n      signUpEmail,\n      signUpPassword\n    } = this.state;\n    axios.post('http://localhost:5001/users/add', {\n      firstname: signUpFirstname,\n      lastname: signUpLastname,\n      email: signUpEmail,\n      password: signUpPassword\n    }).then(res => {\n      console.log(res.data + ', you may now sign in');\n      this.setState({\n        signUpError: res.data,\n        isLoading: false\n      });\n    }).catch(err => {\n      console.log('Error: ' + err);\n      this.setState({\n        signUpError: err,\n        isLoading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      isLoading,\n      signInEmail,\n      token,\n      signInPassword,\n      signInError,\n      signUpError,\n      signUpFirstname,\n      signUpLastname,\n      signUpEmail,\n      signUpPassword\n    } = this.state;\n\n    if (isLoading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 25\n        }\n      }, \"Loading...\"));\n    }\n\n    if (!token) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }\n      }, \"Sign In\"), signInError ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 35\n        }\n      }, signInError) : null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"email\",\n        placeholder: \"Email.Gmail.com\",\n        required: true,\n        className: \"form-control\",\n        value: signInEmail,\n        onChange: this.onSignInChangeEmail,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        required: true,\n        className: \"form-control\",\n        value: signInPassword,\n        onChange: this.onSignInChangePassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Log In\",\n        className: \"btn btn-primary\",\n        onClick: this.onSignIn,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 17\n        }\n      }, \"Sign Up\"), signUpError ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 35\n        }\n      }, signUpError) : null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"First name\",\n        required: true,\n        className: \"form-control\",\n        value: signUpFirstname,\n        onChange: this.onSignUpChangeFirstname,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Last name\",\n        required: true,\n        className: \"form-control\",\n        value: signUpLastname,\n        onChange: this.onSignUpChangeLastname,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"email\",\n        placeholder: \"Email.Gmail.com\",\n        required: true,\n        className: \"form-control\",\n        value: signUpEmail,\n        onChange: this.onSignUpChangeEmail,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        required: true,\n        className: \"form-control\",\n        value: signUpPassword,\n        onChange: this.onSignUpChangePassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Log In\",\n        onClick: this.onSignUp,\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 25\n        }\n      }))));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }\n    }, \"Account\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.logout,\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }\n    }, \"Log Out\"));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/AYORINDE JOHN/Desktop/smarthub files/smarthub/react-apps/music/src/components/login.js"],"names":["React","Component","axios","getFromStorage","setInStorage","Login","constructor","props","state","isLoading","token","signUpError","signInError","signInEmail","signInPassword","signUpFirstname","signUpLastname","signUpEmail","signUpPassword","onSignInChangeEmail","bind","onSignInChangePassword","onSignUpChangeEmail","onSignUpChangePassword","onSignUpChangeFirstname","onSignUpChangeLastname","onSignIn","onSignUp","logout","componentDidMount","obj","console","log","get","then","res","data","message","setState","catch","err","e","target","value","post","email","password","onSubmit","preventDefault","firstname","lastname","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport { getFromStorage, setInStorage } from '../utils/storage';\r\n\r\nexport default class Login extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state ={\r\n            isLoading: true,\r\n            token: '',\r\n            signUpError: '',\r\n            signInError: '',\r\n            signInEmail: '',\r\n            signInPassword: '',\r\n            signUpFirstname: '',\r\n            signUpLastname: '',\r\n            signUpEmail: '',\r\n            signUpPassword: ''\r\n        };\r\n\r\n        this.onSignInChangeEmail = this.onSignInChangeEmail.bind(this);\r\n        this.onSignInChangePassword = this.onSignInChangePassword.bind(this);\r\n        this.onSignUpChangeEmail = this.onSignUpChangeEmail.bind(this);\r\n        this.onSignUpChangePassword = this.onSignUpChangePassword.bind(this);\r\n        this.onSignUpChangeFirstname = this.onSignUpChangeFirstname.bind(this);\r\n        this.onSignUpChangeLastname = this.onSignUpChangeLastname.bind(this);\r\n\r\n        this.onSignIn = this.onSignIn.bind(this);\r\n        this.onSignUp = this.onSignUp.bind(this);\r\n        this.logout = this.logout.bind(this);\r\n        \r\n    }\r\n\r\n    componentDidMount(){\r\n        const obj = getFromStorage('the_main_app');\r\n\r\n        if(obj && obj.token){\r\n            const {token} = obj;\r\n            console.log(token);\r\n            axios.get('http://localhost:5001/users/verify/'+ token)\r\n            .then(res=>{\r\n                console.log(res.data);\r\n                if (res.data.message === 'Verified') {\r\n                    this.setState({\r\n                        token: token,\r\n                        isLoading: false\r\n                    });\r\n                }\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n                this.setState({\r\n                    isLoading: false\r\n                });\r\n            }\r\n            )\r\n\r\n        } else {\r\n            this.setState({\r\n                isLoading: false\r\n            });\r\n        }\r\n    }\r\n\r\n    onSignInChangeEmail(e){\r\n        this.setState({\r\n            signInEmail: e.target.value\r\n        });\r\n    }\r\n\r\n    onSignInChangePassword(e){\r\n        this.setState({\r\n            signInPassword: e.target.value\r\n        });\r\n    }\r\n\r\n    onSignUpChangeFirstname(e){\r\n        this.setState({\r\n            signUpFirstname: e.target.value\r\n        });\r\n    }\r\n\r\n    onSignUpChangeLastname(e){\r\n        this.setState({\r\n            signUpLastname: e.target.value\r\n        });\r\n    }\r\n\r\n    onSignUpChangeEmail(e){\r\n        this.setState({\r\n            signUpEmail: e.target.value\r\n        });\r\n    }\r\n\r\n    onSignUpChangePassword(e){\r\n        this.setState({\r\n            signUpPassword: e.target.value\r\n        });\r\n    }\r\n\r\n    onSignIn(){\r\n        const { \r\n            signInEmail,\r\n            signInPassword\r\n         } = this.state;\r\n\r\n         axios.post('http://localhost:5001/users/signin',{\r\n             email: signInEmail,\r\n             password: signInPassword\r\n         })\r\n            .then(res=>{\r\n                console.log(res);\r\n                setInStorage('the_main_app', {token: res.data.token})\r\n                this.setState({\r\n                    signInError: res.data.message,\r\n                    isLoading: false,\r\n                    signInPassword: '',\r\n                    signInEmail: ''\r\n                });\r\n                this.componentDidMount();\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                this.setState({\r\n                    signInError: err,\r\n                    isLoading: false\r\n                });\r\n            }\r\n            )\r\n    }\r\n\r\n    logout(){\r\n        this.setState({\r\n            isLoading: true\r\n        });\r\n        const obj = getFromStorage('the_main_app');\r\n\r\n        if(obj && obj.token){\r\n            const {token} = obj;\r\n            console.log(token);\r\n            axios.get('http://localhost:5001/users/logout/'+ token)\r\n            .then(res=>{\r\n                console.log(res.data);\r\n                if (res.data === 'session is deleted') {\r\n                    this.setState({\r\n                    token: '',\r\n                    isLoading: false\r\n                    });\r\n                }\r\n                this.setState({\r\n                    isLoading: false\r\n                    });\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n                this.setState({\r\n                    isLoading: false\r\n                });}\r\n            )\r\n\r\n        } else {\r\n            this.setState({\r\n                isLoading: false\r\n            });\r\n        }\r\n    }\r\n\r\n    onSubmit(e){\r\n        e.preventDefault();\r\n    }\r\n\r\n    onSignUp(){\r\n        const { \r\n            signUpFirstname,\r\n            signUpLastname,\r\n            signUpEmail,\r\n            signUpPassword\r\n         } = this.state;\r\n\r\n         axios.post('http://localhost:5001/users/add',{\r\n             firstname: signUpFirstname,\r\n             lastname: signUpLastname,\r\n             email: signUpEmail,\r\n             password: signUpPassword\r\n         })\r\n            .then(res=>{\r\n                console.log(res.data+', you may now sign in');\r\n                this.setState({\r\n                    signUpError: res.data,\r\n                    isLoading: false\r\n                });\r\n            })\r\n            .catch(err=>{\r\n                console.log('Error: '+ err);\r\n                this.setState({\r\n                    signUpError: err,\r\n                    isLoading: false\r\n                });\r\n            }\r\n            )\r\n    }\r\n\r\n    render(){\r\n        const { isLoading,\r\n                signInEmail,\r\n                token,\r\n                signInPassword,\r\n                signInError,\r\n                signUpError,\r\n                signUpFirstname,\r\n                signUpLastname,\r\n                signUpEmail,\r\n                signUpPassword\r\n             } = this.state;\r\n        if (isLoading){\r\n            return(<div><p>Loading...</p></div>);\r\n        }\r\n        if (!token){\r\n            return(\r\n            <div>\r\n                <form onSubmit={this.onSubmit}>\r\n                <p>Sign In</p>\r\n                {(signInError) ? (<p>{signInError}</p>) : (null)}\r\n                    <div className='form-group'>\r\n                        <input type='email' placeholder='Email.Gmail.com' required className='form-control'\r\n                        value={signInEmail} onChange={this.onSignInChangeEmail}\r\n                        />\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='password' placeholder='Password' required className='form-control'\r\n                        value={signInPassword} onChange={this.onSignInChangePassword}\r\n                        />\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='submit' value='Log In' className='btn btn-primary' onClick={this.onSignIn} />\r\n                    </div>\r\n                </form>\r\n                <br />\r\n                <form onSubmit={this.onSubmit}>\r\n                <p>Sign Up</p>\r\n                {(signUpError) ? (<p>{signUpError}</p>) : (null)}\r\n                <div className='form-group'>\r\n                        <input type='text' placeholder='First name' required className='form-control'\r\n                        value={signUpFirstname} onChange={this.onSignUpChangeFirstname}\r\n                        />\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='text' placeholder='Last name' required className='form-control'\r\n                        value={signUpLastname} onChange={this.onSignUpChangeLastname}\r\n                        />\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='email' placeholder='Email.Gmail.com' required className='form-control'\r\n                        value={signUpEmail} onChange={this.onSignUpChangeEmail}\r\n                        />\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='password' placeholder='Password' required className='form-control'\r\n                        value={signUpPassword} onChange={this.onSignUpChangePassword}\r\n                        />\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <input type='submit' value='Log In' onClick={this.onSignUp} className='btn btn-primary' />\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            );\r\n        }\r\n        return(\r\n            <div>\r\n                <p>Account</p>\r\n                <button type='submit' onClick={this.logout} className='btn btn-primary'>Log Out</button>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}