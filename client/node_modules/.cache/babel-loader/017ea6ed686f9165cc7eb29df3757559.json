{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AYORINDE JOHN\\\\Desktop\\\\smarthub files\\\\smarthub\\\\react-apps\\\\music\\\\src\\\\components\\\\admin\\\\Edit_posts.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css'; // import {Link} from 'react-router-dom';\n\nexport default class EditPost extends Component {\n  constructor(props) {\n    super(props);\n    this.onChangeTitle = this.onChangeTitle.bind(this);\n    this.onChangeCategory = this.onChangeCategory.bind(this);\n    this.onChangeAuthor = this.onChangeAuthor.bind(this);\n    this.onChangeStatus = this.onChangeStatus.bind(this);\n    this.onChangeImage = this.onChangeImage.bind(this); // this.onChangeFile = this.onChangeFile.bind(this);\n\n    this.onChangeContent = this.onChangeContent.bind(this);\n    this.onChangeDate = this.onChangeDate.bind(this);\n    this.onPost = this.onPost.bind(this);\n    this.state = {\n      post_title: '',\n      post_category: '',\n      post_categories: [],\n      post_author: '',\n      post_status: '',\n      post_image: null,\n      // post_file: null,\n      post_content: '',\n      post_date: new Date(),\n      pic: ''\n    }; // const pic = require(`../images/${this.state.post_image}`);\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:5001/posts/' + this.props.match.params.id).then(res => {\n      const jack = require(`../../images/${res.data.post_image}`);\n\n      this.setState({\n        post_title: res.data.post_title,\n        post_category: res.data.post_category,\n        post_author: res.data.post_author,\n        post_status: res.data.post_status,\n        post_image: res.data.post_image,\n        // post_file: null,\n        post_content: res.data.post_content,\n        post_date: new Date(res.data.post_date),\n        pic: jack\n      });\n      axios.get('http://localhost:5001/categories/').then(response => {\n        if (response.data.length > 0) {\n          this.setState({\n            post_categories: response.data.map(cat => cat.category) // post_category: response.data[0].category\n\n          });\n        } else console.log('no data found');\n      });\n      console.log(res.data.post_title);\n    }).catch(err => alert('err: ' + err));\n  }\n\n  onChangeTitle(e) {\n    this.setState({\n      post_title: e.target.value\n    });\n    console.log(this.state.post_title);\n  }\n\n  onChangeCategory(e) {\n    this.setState({\n      post_category: e.target.value\n    }); // console.log(e.target.value);\n  }\n\n  onChangeAuthor(e) {\n    this.setState({\n      post_author: e.target.value\n    });\n  }\n\n  onChangeStatus(e) {\n    this.setState({\n      post_status: e.target.value\n    });\n  }\n\n  onChangeImage(e) {\n    this.setState({\n      post_image: e.target.files[0]\n    }); // console.log(this.state.post_image);\n\n    console.log(e.target.files[0]);\n  } // onChangeFile(e){\n  //     this.setState({\n  //         post_file: e.target.files[0]\n  //     });\n  //     console.log(e.target.files[0]);\n  // }\n\n\n  onChangeContent(e) {\n    this.setState({\n      post_content: e.target.value\n    });\n  }\n\n  onChangeDate(post_date) {\n    this.setState({\n      post_date: post_date\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n  }\n\n  onPost() {\n    // var path = require(\"path\");\n    // var postfile = this.state.post_file.split('\\\\').join('/');\n    // var file = path.basename(postfile);\n    const posts = {\n      post_title: this.state.post_title,\n      post_category: this.state.post_category,\n      post_author: this.state.post_author,\n      post_status: this.state.post_status,\n      post_image: this.state.post_image,\n      // post_file: this.state.post_file,\n      post_content: this.state.post_content,\n      post_date: this.state.post_date\n    };\n    console.log(posts);\n    console.log(this.state.post_image); // const config = {\n    //     headers: {\n    //         'Content-Type': 'multipart/form-data'\n    //     }\n    // };\n    // console.log(posts);\n    // const File_path = './../../public/files/' + posts.post_file;\n    // const Img_path = './../../public/images/' + posts.post_image;\n    // const file = new File(File_path);\n    // alert(File_path);\n\n    const formdata = new FormData();\n    formdata.append('post_title', this.state.post_title);\n    formdata.append('post_category', this.state.post_category);\n    formdata.append('post_author', this.state.post_author);\n    formdata.append('post_status', this.state.post_status);\n    formdata.append('post_content', this.state.post_content);\n    formdata.append('post_date', this.state.post_date);\n    formdata.append('image', this.state.post_image);\n    console.log(formdata);\n    axios.post('http://localhost:5001/posts/update/' + this.props.match.params.id, formdata).then(res => {\n      console.log(res.data);\n      alert(\"The file is successfully updated\");\n      window.location = '/admin/view_post';\n    }).catch(err => alert('err: ' + err));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      encType: \"multipart/form-data\",\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, \"Post title\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      required: true,\n      className: \"form-control\",\n      value: this.state.post_title,\n      onChange: this.onChangeTitle,\n      name: \"post_title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"post_category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, \"Post category\"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"post_category\",\n      id: \"\",\n      required: true,\n      value: this.state.post_category,\n      onChange: this.onChangeCategory,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }\n    }, this.state.post_categories.map(function (cat) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: cat,\n        value: cat,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 44\n        }\n      }, cat);\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, \"Post Author\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"post_author\",\n      required: true,\n      value: this.state.post_author,\n      onChange: this.onChangeAuthor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, \"Post status\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"post_status\",\n      required: true,\n      value: this.state.post_status,\n      onChange: this.onChangeStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group custom-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"post_image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 21\n      }\n    }, \"Post image\"), /*#__PURE__*/React.createElement(\"img\", {\n      width: \"100\",\n      src: this.state.pic,\n      alt: this.state.post_image,\n      className: \"img-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"post_image\",\n      className: \"form-control-file\",\n      files: this.state.post_image,\n      onChange: this.onChangeImage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }, \"Post content\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"post_content\",\n      className: \"form-control\",\n      id: \"\",\n      cols: \"30\",\n      rows: \"10\",\n      required: true,\n      value: this.state.post_content,\n      onChange: this.onChangeContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 25\n      }\n    }, \"Post Date: \"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(DatePicker, {\n      selected: this.state.post_date,\n      onChange: this.onChangeDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      type: \"submit\",\n      onClick: this.onPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }\n    }, \"Update\")));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/AYORINDE JOHN/Desktop/smarthub files/smarthub/react-apps/music/src/components/admin/Edit_posts.js"],"names":["React","Component","axios","DatePicker","EditPost","constructor","props","onChangeTitle","bind","onChangeCategory","onChangeAuthor","onChangeStatus","onChangeImage","onChangeContent","onChangeDate","onPost","state","post_title","post_category","post_categories","post_author","post_status","post_image","post_content","post_date","Date","pic","componentDidMount","get","match","params","id","then","res","jack","require","data","setState","response","length","map","cat","category","console","log","catch","err","alert","e","target","value","files","onSubmit","preventDefault","posts","formdata","FormData","append","post","window","location","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\n// import {Link} from 'react-router-dom';\r\n\r\nexport default class EditPost extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.onChangeTitle = this.onChangeTitle.bind(this);\r\n        this.onChangeCategory = this.onChangeCategory.bind(this);\r\n        this.onChangeAuthor = this.onChangeAuthor.bind(this);\r\n        this.onChangeStatus = this.onChangeStatus.bind(this);\r\n        this.onChangeImage = this.onChangeImage.bind(this);\r\n        // this.onChangeFile = this.onChangeFile.bind(this);\r\n        this.onChangeContent = this.onChangeContent.bind(this);\r\n        this.onChangeDate = this.onChangeDate.bind(this);\r\n        this.onPost = this.onPost.bind(this);\r\n\r\n        this.state={\r\n            post_title: '',\r\n            post_category: '',\r\n            post_categories: [],\r\n            post_author: '',\r\n            post_status: '',\r\n            post_image: null,\r\n            // post_file: null,\r\n            post_content: '',\r\n            post_date: new Date(),\r\n            pic: ''\r\n        };\r\n        // const pic = require(`../images/${this.state.post_image}`);\r\n    }\r\n    componentDidMount(){\r\n        axios.get('http://localhost:5001/posts/'+this.props.match.params.id)\r\n        .then(res => {\r\n        const jack = require(`../../images/${res.data.post_image}`);\r\n            this.setState({\r\n                post_title: res.data.post_title,\r\n                post_category: res.data.post_category,\r\n                post_author: res.data.post_author,\r\n                post_status: res.data.post_status,\r\n                post_image: res.data.post_image,\r\n                // post_file: null,\r\n                post_content: res.data.post_content,\r\n                post_date: new Date(res.data.post_date),\r\n                pic: jack\r\n            });\r\n            axios.get('http://localhost:5001/categories/')\r\n            .then(response => {\r\n                if (response.data.length > 0){\r\n                    this.setState({\r\n                        post_categories: response.data.map(cat=>cat.category),\r\n                        // post_category: response.data[0].category\r\n                    });\r\n                } else console.log('no data found');\r\n            });\r\n            \r\n        console.log(res.data.post_title);\r\n    })\r\n        .catch(err => alert('err: ' + err));\r\n    }\r\n\r\n    onChangeTitle(e){\r\n        this.setState({\r\n            post_title: e.target.value\r\n        });\r\n        console.log(this.state.post_title);\r\n    }\r\n\r\n    onChangeCategory(e){\r\n        this.setState({\r\n            post_category: e.target.value\r\n        });\r\n        // console.log(e.target.value);\r\n    }\r\n    onChangeAuthor(e){\r\n        this.setState({\r\n            post_author: e.target.value\r\n        });\r\n    }\r\n    onChangeStatus(e){\r\n        this.setState({\r\n            post_status: e.target.value\r\n        });\r\n    }\r\n    onChangeImage(e){\r\n        this.setState({\r\n            post_image: e.target.files[0]\r\n        });\r\n        // console.log(this.state.post_image);\r\n        console.log(e.target.files[0]);\r\n    }\r\n    // onChangeFile(e){\r\n    //     this.setState({\r\n    //         post_file: e.target.files[0]\r\n    //     });\r\n    //     console.log(e.target.files[0]);\r\n    // }\r\n    onChangeContent(e){\r\n        this.setState({\r\n            post_content: e.target.value\r\n        });\r\n    }\r\n    onChangeDate(post_date){\r\n        this.setState({\r\n            post_date: post_date\r\n        });\r\n    }\r\n    onSubmit(e){\r\n        e.preventDefault();\r\n    }\r\n    onPost(){\r\n        // var path = require(\"path\");\r\n        // var postfile = this.state.post_file.split('\\\\').join('/');\r\n        // var file = path.basename(postfile);\r\n        const posts = {\r\n            post_title: this.state.post_title,\r\n            post_category: this.state.post_category,\r\n            post_author: this.state.post_author,\r\n            post_status: this.state.post_status,\r\n            post_image: this.state.post_image,\r\n            // post_file: this.state.post_file,\r\n            post_content: this.state.post_content,\r\n            post_date: this.state.post_date\r\n        };\r\n        console.log(posts);\r\n        console.log(this.state.post_image);\r\n        // const config = {\r\n        //     headers: {\r\n        //         'Content-Type': 'multipart/form-data'\r\n        //     }\r\n        // };\r\n        // console.log(posts);\r\n        // const File_path = './../../public/files/' + posts.post_file;\r\n        // const Img_path = './../../public/images/' + posts.post_image;\r\n        \r\n        // const file = new File(File_path);\r\n\r\n        // alert(File_path);\r\n        const formdata = new FormData();\r\n        formdata.append('post_title', this.state.post_title);\r\n        formdata.append('post_category', this.state.post_category);\r\n        formdata.append('post_author', this.state.post_author);\r\n        formdata.append('post_status', this.state.post_status);\r\n        formdata.append('post_content', this.state.post_content);\r\n        formdata.append('post_date', this.state.post_date);\r\n        formdata.append('image', this.state.post_image);\r\n        console.log(formdata);\r\n        \r\n        axios.post('http://localhost:5001/posts/update/'+this.props.match.params.id, formdata)\r\n        .then(res => {console.log(res.data);alert(\"The file is successfully updated\");window.location = '/admin/view_post';})\r\n        .catch(err => alert('err: ' + err));\r\n\r\n        \r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <form encType=\"multipart/form-data\" onSubmit={this.onSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"title\">Post title</label>\r\n                    <input type=\"text\" required className=\"form-control\" value={this.state.post_title} onChange={this.onChangeTitle} name=\"post_title\" />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"post_category\">Post category</label>\r\n                    <select name=\"post_category\" id=\"\" required value={this.state.post_category} onChange={this.onChangeCategory}>\r\n                    {\r\n                                this.state.post_categories.map(function(cat){\r\n                                    return <option key={cat}\r\n                                    value={cat}>{cat}\r\n                                    </option>\r\n                                })\r\n                            }\r\n                    </select>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"title\">Post Author</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"post_author\" required value={this.state.post_author} onChange={this.onChangeAuthor} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"title\">Post status</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"post_status\" required value={this.state.post_status} onChange={this.onChangeStatus}/>\r\n                </div>\r\n                <div className=\"form-group custom-file\">\r\n                    <label htmlFor=\"post_image\">Post image</label>\r\n                    <img width=\"100\" src={this.state.pic} alt={this.state.post_image} className='img-fluid'></img>\r\n                    <input type=\"file\" name=\"post_image\" className=\"form-control-file\" files={this.state.post_image} onChange={this.onChangeImage} />\r\n                </div>\r\n                {/* <div className=\"form-group custom-file mb-3\">\r\n                    <label htmlFor=\"title\">Post vidoe/audio</label>\r\n                    <input type=\"file\" className=\"form-control-file\" name=\"post_file\" required onChange={this.onChangeFile}/>\r\n                </div> */}\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"title\">Post content</label>\r\n                    <textarea name=\"post_content\" className=\"form-control\" id=\"\" cols=\"30\" rows=\"10\" required value={this.state.post_content} onChange={this.onChangeContent}>\r\n                    </textarea>\r\n                </div>\r\n                <div className='form-group'>\r\n                        <label>Post Date: </label>\r\n                        <div>\r\n                            <DatePicker\r\n                            selected={this.state.post_date}\r\n                            onChange={this.onChangeDate}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                <div className=\"form-group\">\r\n                    <button className=\"btn btn-primary\" type='submit' onClick={this.onPost} >Update</button>\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}